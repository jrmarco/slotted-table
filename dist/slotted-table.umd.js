(function(e,C){typeof exports=="object"&&typeof module<"u"?module.exports=C(require("vue")):typeof define=="function"&&define.amd?define(["vue"],C):(e=typeof globalThis<"u"?globalThis:e||self,e.SlottedTable=C(e.Vue))})(this,function(e){"use strict";var C=document.createElement("style");C.textContent=`.slottedtable[data-v-d22a67cd]{width:100%;border-collapse:collapse}.slottedtable .header[data-v-d22a67cd],.slottedtable .body[data-v-d22a67cd]{display:table;width:100%}.slottedtable .row[data-v-d22a67cd]{display:table-row;background-color:#fff;color:#000}.slottedtable .cell[data-v-d22a67cd]{display:table-cell;border-top:1px solid black;border-bottom:1px solid black;padding:8px;text-align:center}.slottedtable .footer[data-v-d22a67cd]{display:flex;flex-direction:row;gap:1em;justify-content:flex-end;margin-top:1em;align-items:center}.slottedtable .pageselector[data-v-d22a67cd]{display:flex;flex-direction:row;gap:1em;align-items:center}.pageselector .select[data-v-d22a67cd]{display:inline-block;background-color:#fff;color:#000;border:2px solid black;text-align:center;text-decoration:none;transition:background-color .3s ease,color .3s ease;border-radius:15px;font-size:14px}.slottedtable .pagebtns[data-v-d22a67cd]{display:flex;flex-direction:row}.pagebtns button[data-v-d22a67cd]{display:inline-block;padding:5px 10px;border:1px solid gray;text-align:center;text-decoration:none;transition:background-color .3s ease,color .3s ease;border-radius:5px;background-color:#fff}.pagebtns .active[data-v-d22a67cd]{font-weight:700;background-color:green;color:#fff}.slottedtable .pointer[data-v-d22a67cd]{cursor:pointer}
`,document.head.appendChild(C);const A={pleaseWait:"Caricamento",noResults:"Nessun risultato",rowsPerPage:"Righe per pagina:",of:"di"},z={pleaseWait:"Loading",noResults:"No results",rowsPerPage:"Rows per page:",of:"of"},M={pleaseWait:"Chargement",noResults:"Aucun résultat",rowsPerPage:"Lignes par page:",of:"sur"},v={pleaseWait:"Laden",noResults:"Keine Ergebnisse",rowsPerPage:"Zeilen pro Seite:",of:"von"},O=a=>{switch(a){case"it":return A;case"en":return z;case"fr":return M;case"de":return v;default:return z}},t=e.ref({language:"en",trs:{},loading:!0,columns:[],ordering:{sortBy:"id",sortType:"desc"},startIndex:1,endIndex:1,page:1,rowsPerPage:10,totalItems:0,styles:{}}),W=a=>{const{styles:s}=t.value;if(!Object.keys(s).length)return"";function i(y){return["container","header","body","footer","row","cell","pageselector","pagebtns"].includes(y)}return i(a)&&s[a]||""},R=a=>{const s=new Date(a);return!isNaN(s.getTime())&&a===s.toISOString().split("T")[0]?s.getTime():!1},c={getStyle:W,castToType:a=>isNaN(Number(a))?R(a)?R(a):a:Number(a)},j=["onClick","title"],H=["innerHTML"],U=e.defineComponent({__name:"TableHeader",emits:["update"],setup(a,{emit:s}){const i=s,y=e.computed(()=>t.value.columns),_=e.computed(()=>["row","header",c.getStyle("row"),c.getStyle("header")]),h=o=>["cell",o.sortable?"pointer":"",c.getStyle("cell")],S=o=>{if(!o||!o.value||!o.sortable)return;const{sortBy:d,sortType:l}=t.value.ordering;t.value.ordering.sortType=d===o.value&&l==="asc"?"desc":"asc",t.value.ordering.sortBy=o.value,i("update")},B=o=>({width:o.width?`${o.width}px`:"auto"}),w=o=>{const{sortBy:d,sortType:l}=t.value.ordering;return d!==o?"":!l||l==="asc"?"&uarr;":"&darr;"};return(o,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(_.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,(l,T)=>(e.openBlock(),e.createElementBlock("div",{key:l.value||T,onClick:V=>S(l),class:e.normalizeClass(h(l)),style:e.normalizeStyle(B(l)),title:l.text},[e.createElementVNode("b",null,[e.createTextVNode(e.toDisplayString(l.text)+" ",1),e.createElementVNode("span",{innerHTML:w(l.value)},null,8,H)])],14,j))),128))],2))}}),q=["value"],K=["onClick"],Z={key:1},G=e.defineComponent({__name:"TableFooter",emits:["update"],setup(a,{emit:s}){const i=s,y=e.computed(()=>[5,10,25,50]),_=e.computed(()=>{const{totalItems:p,rowsPerPage:x,page:n}=t.value;if(!p)return[];const g=Math.ceil(p/x),m=n;if(g<=4)return Array.from({length:g},($,D)=>D+1);const k=[1];return m>3&&k.push("..."),m>2&&k.push(m-1),m!==1&&m!==g&&k.push(m),m<g-1&&k.push(m+1),m<g-2&&k.push("..."),k.push(g),k}),h=e.computed({get(){return t.value.rowsPerPage},set(p){t.value.rowsPerPage=p}}),S=e.computed(()=>t.value.startIndex),B=e.computed(()=>t.value.endIndex),w=e.computed(()=>t.value.totalItems),o=e.computed(()=>t.value.page),d=async p=>{!Number.isInteger(p)||p<1||(t.value.page=p,i("update"))},l=e.computed(()=>t.value.trs),T=e.computed(()=>["pageselector",c.getStyle("pageselector")]),V=e.computed(()=>["pagebtns",c.getStyle("pagebtns")]);return(p,x)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{class:e.normalizeClass(T.value)},[e.createTextVNode(e.toDisplayString(l.value.rowsPerPage)+" ",1),e.withDirectives(e.createElementVNode("select",{class:"select","onUpdate:modelValue":x[0]||(x[0]=n=>h.value=n),onChange:x[1]||(x[1]=n=>d(1))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,n=>(e.openBlock(),e.createElementBlock("option",{key:n,value:n},e.toDisplayString(n),9,q))),128))],544),[[e.vModelSelect,h.value]])],2),e.createElementVNode("div",null,e.toDisplayString(S.value)+"-"+e.toDisplayString(B.value)+" "+e.toDisplayString(l.value.of)+" "+e.toDisplayString(w.value||0),1),w.value>h.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(V.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,n=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:n},[typeof n=="number"?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass({active:Number(n)===Number(o.value)}),onClick:g=>d(n)},e.toDisplayString(n),11,K)):(e.openBlock(),e.createElementBlock("span",Z,"  "))],64))),128))],2)):e.createCommentVNode("",!0)],64))}}),J={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Q=e.createElementVNode("circle",{cx:"50",cy:"50",r:"40",stroke:"#007bff","stroke-width":"6",fill:"none","stroke-dasharray":"251.2","stroke-dashoffset":"251.2"},[e.createElementVNode("animate",{attributeName:"stroke-dashoffset",from:"251.2",to:"0",dur:"2s",repeatCount:"indefinite"}),e.createElementVNode("animate",{attributeName:"opacity",from:"1",to:"0",dur:"2s",repeatCount:"indefinite"})],-1),X={x:"50%",y:"60%","text-anchor":"middle","font-size":"10px",fill:"#007bff"},Y=e.defineComponent({__name:"SpinnerItem",props:{text:{type:String,default:""}},setup(a){return(s,i)=>(e.openBlock(),e.createElementBlock("svg",J,[Q,e.createElementVNode("text",X,e.toDisplayString(a.text),1)]))}}),ee={key:1},F=((a,s)=>{const i=a.__vccOpts||a;for(const[y,_]of s)i[y]=_;return i})(e.defineComponent({__name:"SlottedTable",props:{headers:{type:Array,default:()=>[],required:!0},items:{type:Array,default:()=>[]},styles:{type:Object,default:()=>({})},language:{type:String,default:"en"},callBack:{type:Function,default:null}},setup(a,{expose:s}){const i=a,{headers:y,items:_,styles:h,language:S,callBack:B}=e.toRefs(i),w=e.ref(!1),o=e.ref([]),d=e.ref([]),l=e.ref(O(S.value)),T=async()=>{if(!B.value)return;const{page:r,rowsPerPage:u,ordering:b}=t.value,{sortBy:N,sortType:f}=b,E={page:r,rowsPerPage:u,sortBy:N,sortType:f},P=await B.value(E);P!=null&&P.rows&&P.totalRows&&(o.value=P.rows,t.value.totalItems=P.totalRows)},V=()=>{const{sortBy:r,sortType:u}=t.value.ordering;d.value.sort((b,N)=>{const f=c.castToType(b[r]),E=c.castToType(N[r]);return f<E?u==="asc"?-1:1:f>E?u==="asc"?1:-1:0})},p=()=>{const{page:r,rowsPerPage:u}=t.value;o.value=d.value.slice((r-1)*u,r*u)},x=()=>{const{page:r,rowsPerPage:u,totalItems:b}=t.value;t.value.startIndex=(r-1)*u+1,t.value.endIndex=Math.min(r*u,b)},n=r=>({width:r.width?`${r.width}px`:"auto"}),g=e.computed(()=>t.value.loading),m=e.computed(()=>t.value.columns),k=e.computed(()=>["slottedtable",c.getStyle("container")]),$=e.computed(()=>["body",c.getStyle("body")]),D=e.computed(()=>["row",c.getStyle("row")]),L=e.computed(()=>["cell",c.getStyle("cell")]),te=e.computed(()=>["footer",c.getStyle("footer")]);e.onMounted(async()=>{t.value.trs=l,t.value.language=S.value,t.value.columns=y.value,t.value.styles=h.value,w.value=!!B.value,w.value||(d.value=_.value,t.value.totalItems=d.value.length),await I()});const I=async()=>{t.value.loading=!0,w.value?await T():(V(),p()),x(),t.value.loading=!1};return s({reloadTable:I}),(r,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(k.value)},[g.value||!o.value.length?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass($.value)},[e.createElementVNode("div",{class:e.normalizeClass(D.value)},[e.createElementVNode("div",{class:e.normalizeClass(L.value)},[g.value?(e.openBlock(),e.createBlock(Y,{key:0,text:l.value.pleaseWait},null,8,["text"])):(e.openBlock(),e.createElementBlock("span",ee,e.toDisplayString(l.value.noResults),1))],2)],2)],2)):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass($.value)},[e.createVNode(U,{onUpdate:I}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(b,N)=>(e.openBlock(),e.createElementBlock("div",{key:b.id||N,class:e.normalizeClass(D.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(f,E)=>(e.openBlock(),e.createElementBlock("div",{key:f.value||E,class:e.normalizeClass(L.value),style:e.normalizeStyle(n(f))},[e.renderSlot(r.$slots,"default",{column:f.value,cellData:b[f.value]||f.empty,data:b},void 0,!0)],6))),128))],2))),128))],2)),e.createElementVNode("div",{class:e.normalizeClass(te.value)},[e.createVNode(G,{onUpdate:I})],2)],2))}}),[["__scopeId","data-v-d22a67cd"]]);return typeof window<"u"&&window.Vue&&window.Vue.createApp({}).component("SlottedTable",F),F});
